# ğŸ¤– Telegram Bot Project

Ğ‘Ğ¾Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ¾ÑÑ‚Ğ°Ğ¼Ğ¸: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ, ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ API, Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Google Sheets Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Docker/Render.

---

## ğŸš€ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

- ğŸ“š Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ²ÑĞµÑ… Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ² Ñ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ API
- ğŸ² ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑ‚Ğ°
- ğŸ”¢ ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ÑÑ‚Ğ° Ğ¿Ğ¾ ID
- â• Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑ‚Ğ°
- âŒ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑÑ‚Ğ° (Ğ¿Ğ¾ ID Ğ¸Ğ»Ğ¸ Ğ²ÑĞµÑ…)
- ğŸ“„ Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Google Sheets
- ğŸŒ Webhook-ÑĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° `aiohttp`
- ğŸ³ Docker + Render Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

---

## âš™ï¸ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `.env` ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¼ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ñ‹Ğ¼:

```env
BOT_TOKEN=...               # Ğ¢Ğ¾ĞºĞµĞ½ Telegram-Ğ±Ğ¾Ñ‚Ğ°
WEBHOOK_URL=...             # URL Ğ²ĞµĞ±Ñ…ÑƒĞºĞ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ¾Ñ‚ ngrok Ğ¸Ğ»Ğ¸ Render)
DATABASE_URL=...            # URL PostgreSQL-Ğ±Ğ°Ğ·Ñ‹
GOOGLE_SHEET_ID=...         # ID Ğ²Ğ°ÑˆĞµĞ¹ Google Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
```

## ğŸ› ï¸ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
```
git clone https://github.com/yourname/telegram_bot_project.git
cd telegram_bot_project
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## ğŸ” Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Google Sheets
	1.	Ğ¡ĞºĞ°Ñ‡Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» credentials.json Ñ Google Cloud.
	2.	ĞĞ° Render Ğ¿ĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Secret Files.
	3.	ĞĞ°Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ»: google_credentials.json.
	4.	Ğ’ ĞºĞ¾Ğ´Ğµ Ğ¾Ğ½ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğ¾Ñ‚ÑÑĞ´Ğ°:
```
service_account.Credentials.from_service_account_file(
    "/etc/secrets/google_credentials.json",
    scopes=["https://www.googleapis.com/auth/spreadsheets"]
)
```

## ğŸ”§ Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (Webhook)
```
python webhook_server.py
```

## ğŸ³ Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· Docker (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾) 
```
docker-compose up --build
```

## ğŸŒ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Render
1.	Ğ—Ğ°Ğ¿ÑƒÑˆÑŒÑ‚Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ½Ğ° GitHub
	2.	Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ½Ğ° Render.com
	3.	Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Docker (Ğ½Ğµ Python)
	4.	Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ:
	â€¢	ğŸŸ¢ Environment Variables: .env Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
	â€¢	ğŸ” Secret File: google_credentials.json
	5.	Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: python webhook_server.py


## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Nginx (ĞµÑĞ»Ğ¸ Ñ€Ğ°Ğ·Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚Ğµ Ğ½Ğ° VPS)
Ğ¤Ğ°Ğ¹Ğ» `nginx.conf` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ²Ñ‹ ÑĞ°Ğ¼Ğ¸ Ğ¿Ğ¾Ğ´Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚Ğµ ÑĞµÑ€Ğ²ĞµÑ€ (VPS).

> âš ï¸ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ½Ğ¸Ğ¶Ğµ **Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹** â€” Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ½ĞµÑ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ, Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° ÑĞ²Ğ¾Ğ¸:

```nginx
server {
    listen 80;
    server_name mytestbot.dev;

    location /webhook {
        proxy_pass http://localhost:8000/webhook;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}


## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
```
telegram_bot_project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ bot.py                # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ commands/             # Telegram ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ (/start Ğ¸ Ğ´Ñ€.)
â”‚   â”œâ”€â”€ database/             # ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ init_db
â”‚   â”œâ”€â”€ google/               # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Google Sheets
â”‚   â”œâ”€â”€ handlers/             # Telegram Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ñ‹
â”‚   â”œâ”€â”€ models/               # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”œâ”€â”€ repositories/         # Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ (PostRepository)
â”‚   â”œâ”€â”€ schemas/              # Pydantic-ÑÑ…ĞµĞ¼Ñ‹
â”‚   â”œâ”€â”€ services/             # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹)
â”‚   â”œâ”€â”€ states/               # FSM-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ utils/                # Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚   â””â”€â”€ config.py             # Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ .env
â”œâ”€â”€ main.py                   # Polling Ğ·Ğ°Ğ¿ÑƒÑĞº (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â”œâ”€â”€ webhook_server.py         # Webhook-ÑĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° aiohttp
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env                      # (Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ² git)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ nginx.conf                # (ĞµÑĞ»Ğ¸ Ñ€Ğ°Ğ·Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚Ğµ Ğ½Ğ° VPS)
â”œâ”€â”€ render.yaml               # Ğ”Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
â””â”€â”€ README.md
```